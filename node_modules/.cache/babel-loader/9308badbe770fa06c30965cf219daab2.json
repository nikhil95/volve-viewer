{"ast":null,"code":"import _toConsumableArray from \"/home/kv/Desktop/Nikhil/VolView-4.0.0/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport macro from '@kitware/vtk.js/macro';\nimport vtkColorTransferFunction from '@kitware/vtk.js/Rendering/Core/ColorTransferFunction';\nimport vtkPiecewiseFunction from '@kitware/vtk.js/Common/DataModel/PiecewiseFunction';\nimport ImagePropertyConstants from '@kitware/vtk.js/Rendering/Core/ImageProperty/Constants';\nimport vtkIJKSliceRepresentationProxy from '../IJKSliceRepresentationProxy';\nvar InterpolationType = ImagePropertyConstants.InterpolationType; // ----------------------------------------------------------------------------\n// vtkLabelMapSliceRepProxy methods\n// ----------------------------------------------------------------------------\n\nfunction vtkLabelMapSliceRepProxy(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLabelMapSliceRepProxy');\n  var labelMapSub = null; // needed for vtk.js >= 23.0.0\n\n  model.property.setUseLookupTableScalarRange(true);\n  model.property.setInterpolationType(InterpolationType.NEAREST);\n  model.mapper.setRelativeCoincidentTopologyPolygonOffsetParameters(-2, -2);\n  var cachedColorMap = null;\n\n  function updateTransferFunctions(labelmap) {\n    var colorMap = labelmap.getColorMap();\n\n    if (colorMap === cachedColorMap) {\n      return;\n    } // Cache the colormap using ref equality. This will\n    // avoid updating the colormap unnecessarily.\n\n\n    cachedColorMap = colorMap;\n    var cfun = vtkColorTransferFunction.newInstance();\n    var ofun = vtkPiecewiseFunction.newInstance();\n    Object.keys(colorMap).forEach(function (label) {\n      var l = Number(label);\n      cfun.addRGBPoint.apply(cfun, [l].concat(_toConsumableArray(colorMap[label].slice(0, 3).map(function (c) {\n        return c / 255;\n      }))));\n      ofun.addPoint(l, colorMap[label][3] / 255);\n    });\n    model.property.setRGBTransferFunction(cfun);\n    model.property.setScalarOpacity(ofun);\n  }\n\n  function setInputData(labelmap) {\n    if (labelMapSub) {\n      labelMapSub.unsubscribe();\n      labelMapSub = null;\n    }\n\n    if (labelmap) {\n      labelMapSub = labelmap.onModified(function () {\n        return updateTransferFunctions(labelmap);\n      });\n      updateTransferFunctions(labelmap);\n    }\n  } // override because we manage our own color/opacity functions\n\n\n  publicAPI.setColorBy = function () {};\n\n  publicAPI.delete = macro.chain(publicAPI.delete, function () {\n    if (labelMapSub) {\n      labelMapSub.unsubscribe();\n      labelMapSub = null;\n    }\n  }); // Keep things updated\n\n  model.sourceDependencies.push({\n    setInputData: setInputData\n  });\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {}; // ----------------------------------------------------------------------------\n\nexport function extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  vtkIJKSliceRepresentationProxy.extend(publicAPI, model); // Object specific methods\n\n  vtkLabelMapSliceRepProxy(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nexport var newInstance = macro.newInstance(extend, 'vtkLabelMapSliceRepProxy'); // ----------------------------------------------------------------------------\n\nexport default {\n  newInstance: newInstance,\n  extend: extend\n};","map":{"version":3,"names":["macro","vtkColorTransferFunction","vtkPiecewiseFunction","ImagePropertyConstants","vtkIJKSliceRepresentationProxy","InterpolationType","vtkLabelMapSliceRepProxy","publicAPI","model","classHierarchy","push","labelMapSub","property","setUseLookupTableScalarRange","setInterpolationType","NEAREST","mapper","setRelativeCoincidentTopologyPolygonOffsetParameters","cachedColorMap","updateTransferFunctions","labelmap","colorMap","getColorMap","cfun","newInstance","ofun","Object","keys","forEach","label","l","Number","addRGBPoint","slice","map","c","addPoint","setRGBTransferFunction","setScalarOpacity","setInputData","unsubscribe","onModified","setColorBy","delete","chain","sourceDependencies","DEFAULT_VALUES","extend","initialValues","assign"],"sources":["/home/kv/Desktop/Nikhil/VolView-4.0.0/src/vtk/LabelMapSliceRepProxy/index.js"],"sourcesContent":["import macro from '@kitware/vtk.js/macro';\nimport vtkColorTransferFunction from '@kitware/vtk.js/Rendering/Core/ColorTransferFunction';\nimport vtkPiecewiseFunction from '@kitware/vtk.js/Common/DataModel/PiecewiseFunction';\nimport ImagePropertyConstants from '@kitware/vtk.js/Rendering/Core/ImageProperty/Constants';\n\nimport vtkIJKSliceRepresentationProxy from '../IJKSliceRepresentationProxy';\n\nconst { InterpolationType } = ImagePropertyConstants;\n\n// ----------------------------------------------------------------------------\n// vtkLabelMapSliceRepProxy methods\n// ----------------------------------------------------------------------------\n\nfunction vtkLabelMapSliceRepProxy(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLabelMapSliceRepProxy');\n\n  let labelMapSub = null;\n\n  // needed for vtk.js >= 23.0.0\n  model.property.setUseLookupTableScalarRange(true);\n  model.property.setInterpolationType(InterpolationType.NEAREST);\n  model.mapper.setRelativeCoincidentTopologyPolygonOffsetParameters(-2, -2);\n\n  let cachedColorMap = null;\n\n  function updateTransferFunctions(labelmap) {\n    const colorMap = labelmap.getColorMap();\n    if (colorMap === cachedColorMap) {\n      return;\n    }\n    // Cache the colormap using ref equality. This will\n    // avoid updating the colormap unnecessarily.\n    cachedColorMap = colorMap;\n\n    const cfun = vtkColorTransferFunction.newInstance();\n    const ofun = vtkPiecewiseFunction.newInstance();\n\n    Object.keys(colorMap).forEach((label) => {\n      const l = Number(label);\n      cfun.addRGBPoint(l, ...colorMap[label].slice(0, 3).map((c) => c / 255));\n      ofun.addPoint(l, colorMap[label][3] / 255);\n    });\n\n    model.property.setRGBTransferFunction(cfun);\n    model.property.setScalarOpacity(ofun);\n  }\n\n  function setInputData(labelmap) {\n    if (labelMapSub) {\n      labelMapSub.unsubscribe();\n      labelMapSub = null;\n    }\n\n    if (labelmap) {\n      labelMapSub = labelmap.onModified(() =>\n        updateTransferFunctions(labelmap)\n      );\n      updateTransferFunctions(labelmap);\n    }\n  }\n\n  // override because we manage our own color/opacity functions\n  publicAPI.setColorBy = () => {};\n\n  publicAPI.delete = macro.chain(publicAPI.delete, () => {\n    if (labelMapSub) {\n      labelMapSub.unsubscribe();\n      labelMapSub = null;\n    }\n  });\n\n  // Keep things updated\n  model.sourceDependencies.push({ setInputData });\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {};\n\n// ----------------------------------------------------------------------------\n\nexport function extend(publicAPI, model, initialValues = {}) {\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  vtkIJKSliceRepresentationProxy.extend(publicAPI, model);\n\n  // Object specific methods\n  vtkLabelMapSliceRepProxy(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nexport const newInstance = macro.newInstance(\n  extend,\n  'vtkLabelMapSliceRepProxy'\n);\n\n// ----------------------------------------------------------------------------\n\nexport default { newInstance, extend };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}