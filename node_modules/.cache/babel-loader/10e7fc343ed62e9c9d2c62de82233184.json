{"ast":null,"code":"import _regeneratorRuntime from \"/home/kv/Desktop/Nikhil/VolView-4.0.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _toConsumableArray from \"/home/kv/Desktop/Nikhil/VolView-4.0.0/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/home/kv/Desktop/Nikhil/VolView-4.0.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nfunction readAllDirEntries(_x) {\n  return _readAllDirEntries.apply(this, arguments);\n}\n\nfunction _readAllDirEntries() {\n  _readAllDirEntries = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dirEntry) {\n    var reader, allEntries, entries;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            reader = dirEntry.createReader();\n            allEntries = [];\n            entries = [];\n\n          case 3:\n            _context2.next = 5;\n            return new Promise(function (resolve, reject) {\n              reader.readEntries(resolve, reject);\n            });\n\n          case 5:\n            entries = _context2.sent;\n            allEntries.push.apply(allEntries, _toConsumableArray(entries));\n\n          case 7:\n            if (entries.length) {\n              _context2.next = 3;\n              break;\n            }\n\n          case 8:\n            return _context2.abrupt(\"return\", allEntries);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _readAllDirEntries.apply(this, arguments);\n}\n\nfunction entryToFile(_x2) {\n  return _entryToFile.apply(this, arguments);\n}\n\nfunction _entryToFile() {\n  _entryToFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(fileEntry) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n              fileEntry.file(resolve, reject);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _entryToFile.apply(this, arguments);\n}\n\nfunction readAllFiles(_x3) {\n  return _readAllFiles.apply(this, arguments);\n}\n\nfunction _readAllFiles() {\n  _readAllFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(entries) {\n    var toProcess, fileEntries, entry;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            toProcess = _toConsumableArray(entries);\n            fileEntries = [];\n\n          case 2:\n            if (!toProcess.length) {\n              _context4.next = 18;\n              break;\n            }\n\n            entry = toProcess.shift();\n\n            if (!entry.isFile) {\n              _context4.next = 8;\n              break;\n            }\n\n            fileEntries.push(entry);\n            _context4.next = 16;\n            break;\n\n          case 8:\n            _context4.t0 = toProcess.push;\n            _context4.t1 = toProcess;\n            _context4.t2 = _toConsumableArray;\n            _context4.next = 13;\n            return readAllDirEntries(entry);\n\n          case 13:\n            _context4.t3 = _context4.sent;\n            _context4.t4 = (0, _context4.t2)(_context4.t3);\n\n            _context4.t0.apply.call(_context4.t0, _context4.t1, _context4.t4);\n\n          case 16:\n            _context4.next = 2;\n            break;\n\n          case 18:\n            return _context4.abrupt(\"return\", Promise.all(fileEntries.map(entryToFile)));\n\n          case 19:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _readAllFiles.apply(this, arguments);\n}\n\nexport default {\n  name: 'DragAndDrop',\n  props: {\n    enabled: Boolean\n  },\n  data: function data() {\n    return {\n      dragHover: false\n    };\n  },\n  methods: {\n    onDragOver: function onDragOver(ev) {\n      if (this.enabled) {\n        ev.preventDefault();\n        var types = ev.dataTransfer.types;\n\n        if (types && types instanceof Array ? types.indexOf('Files') !== -1 : 'Files' in types) {\n          this.dragHover = true;\n\n          if (this.dragTimeout !== null) {\n            window.clearTimeout(this.dragTimeout);\n            this.dragTimeout = null;\n          }\n        }\n      }\n    },\n    onDragLeave: function onDragLeave() {\n      var _this = this;\n\n      if (this.enabled) {\n        this.dragTimeout = window.setTimeout(function () {\n          _this.dragHover = false;\n          _this.dragTimeout = null;\n        }, 50);\n      }\n    },\n    onDrop: function onDrop(ev) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var entries, files;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!_this2.enabled) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _this2.dragHover = false;\n\n                if (!ev.dataTransfer.items) {\n                  _context.next = 10;\n                  break;\n                }\n\n                entries = _toConsumableArray(ev.dataTransfer.items).map(function (item) {\n                  var getAsEntry = item.webkitGetAsEntry || item.getAsEntry;\n                  return getAsEntry.call(item);\n                });\n                _context.next = 6;\n                return readAllFiles(entries);\n\n              case 6:\n                files = _context.sent;\n\n                _this2.$emit('drop', files);\n\n                _context.next = 11;\n                break;\n\n              case 10:\n                _this2.$emit('drop', Array.from(ev.dataTransfer.files));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  },\n  created: function created() {\n    // used to debounce dragover\n    this.dragTimeout = null;\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;SAWAA,iB;;;;;kFAAA;IAAA;IAAA;MAAA;QAAA;UAAA;YACAC,MADA,GACAC,uBADA;YAEAC,UAFA,GAEA,EAFA;YAGAC,OAHA,GAGA,EAHA;;UAAA;YAAA;YAAA,OAMA;cACAH;YACA,CAFA,CANA;;UAAA;YAMAG,OANA;YASAD;;UATA;YAAA,IAUAC,cAVA;cAAA;cAAA;YAAA;;UAAA;YAAA,kCAWAD,UAXA;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C;;;;SAcAE,W;;;;;4EAAA;IAAA;MAAA;QAAA;UAAA;YAAA,kCACA;cACAC;YACA,CAFA,CADA;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C;;;;SAMAC,Y;;;;;6EAAA;IAAA;IAAA;MAAA;QAAA;UAAA;YACAC,SADA,sBACAJ,OADA;YAEAK,WAFA,GAEA,EAFA;;UAAA;YAAA,KAGAD,gBAHA;cAAA;cAAA;YAAA;;YAIAE,KAJA,GAIAF,iBAJA;;YAAA,KAKAE,YALA;cAAA;cAAA;YAAA;;YAMAD;YANA;YAAA;;UAAA;YAAA,eASAD,cATA;YAAA,eASAA,SATA;YAAA;YAAA;YAAA,OASAR,wBATA;;UAAA;YAAA;YAAA;;YAAA;;UAAA;YAAA;YAAA;;UAAA;YAAA,kCAYAW,yCAZA;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C;;;;AAeA;EACAC,mBADA;EAEAC;IACAC;EADA,CAFA;EAKAC,IALA,kBAKA;IACA;MACAC;IADA;EAGA,CATA;EAUAC;IACAC,UADA,sBACAC,EADA,EACA;MACA;QACAA;QAEA;;QACA,IACAC,kCACAA,6BADA,GAEA,gBAHA,EAIA;UACA;;UACA;YACAC;YACA;UACA;QACA;MACA;IACA,CAlBA;IAmBAC,WAnBA,yBAmBA;MAAA;;MACA;QACA;UACA;UACA;QACA,CAHA,EAGA,EAHA;MAIA;IACA,CA1BA;IA2BAC,MA3BA,kBA2BAJ,EA3BA,EA2BA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA,cADA;kBAAA;kBAAA;gBAAA;;gBAEA;;gBAFA,KAGAA,qBAHA;kBAAA;kBAAA;gBAAA;;gBAIAf,OAJA,GAIA;kBACA;kBACA;gBACA,CAHA,CAJA;gBAAA;gBAAA,OAQAG,qBARA;;cAAA;gBAQAiB,KARA;;gBASA;;gBATA;gBAAA;;cAAA;gBAWA;;cAXA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAcA;EAzCA,CAVA;EAqDAC,OArDA,qBAqDA;IACA;IACA;EACA;AAxDA","names":["readAllDirEntries","reader","dirEntry","allEntries","entries","entryToFile","fileEntry","readAllFiles","toProcess","fileEntries","entry","Promise","name","props","enabled","data","dragHover","methods","onDragOver","ev","types","window","onDragLeave","onDrop","files","created"],"sourceRoot":"src/components","sources":["DragAndDrop.vue"],"sourcesContent":["<template>\n  <div\n    v-on:dragover.prevent=\"onDragOver\"\n    v-on:dragleave=\"onDragLeave\"\n    v-on:drop.prevent=\"onDrop\"\n  >\n    <slot :dragHover=\"dragHover\" />\n  </div>\n</template>\n\n<script>\nasync function readAllDirEntries(dirEntry) {\n  const reader = dirEntry.createReader();\n  const allEntries = [];\n  let entries = [];\n  do {\n    // eslint-disable-next-line no-await-in-loop\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n    allEntries.push(...entries);\n  } while (entries.length);\n  return allEntries;\n}\n\nasync function entryToFile(fileEntry) {\n  return new Promise((resolve, reject) => {\n    fileEntry.file(resolve, reject);\n  });\n}\n\nasync function readAllFiles(entries) {\n  const toProcess = [...entries];\n  const fileEntries = [];\n  while (toProcess.length) {\n    const entry = toProcess.shift();\n    if (entry.isFile) {\n      fileEntries.push(entry);\n    } else {\n      // eslint-disable-next-line no-await-in-loop\n      toProcess.push(...(await readAllDirEntries(entry)));\n    }\n  }\n  return Promise.all(fileEntries.map(entryToFile));\n}\n\nexport default {\n  name: 'DragAndDrop',\n  props: {\n    enabled: Boolean,\n  },\n  data() {\n    return {\n      dragHover: false,\n    };\n  },\n  methods: {\n    onDragOver(ev) {\n      if (this.enabled) {\n        ev.preventDefault();\n\n        const { types } = ev.dataTransfer;\n        if (\n          types && types instanceof Array\n            ? types.indexOf('Files') !== -1\n            : 'Files' in types\n        ) {\n          this.dragHover = true;\n          if (this.dragTimeout !== null) {\n            window.clearTimeout(this.dragTimeout);\n            this.dragTimeout = null;\n          }\n        }\n      }\n    },\n    onDragLeave() {\n      if (this.enabled) {\n        this.dragTimeout = window.setTimeout(() => {\n          this.dragHover = false;\n          this.dragTimeout = null;\n        }, 50);\n      }\n    },\n    async onDrop(ev) {\n      if (this.enabled) {\n        this.dragHover = false;\n        if (ev.dataTransfer.items) {\n          const entries = [...ev.dataTransfer.items].map((item) => {\n            const getAsEntry = item.webkitGetAsEntry || item.getAsEntry;\n            return getAsEntry.call(item);\n          });\n          const files = await readAllFiles(entries);\n          this.$emit('drop', files);\n        } else {\n          this.$emit('drop', Array.from(ev.dataTransfer.files));\n        }\n      }\n    },\n  },\n  created() {\n    // used to debounce dragover\n    this.dragTimeout = null;\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}